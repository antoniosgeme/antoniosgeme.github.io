---
title: "Visualizing Potential Flows"
date: 2023-11-30
permalink: /posts/2023/11/blog-post-1/
tags:
  - Aerodynamics
  - Potential Flow
  - Conformal Mapping
---

<div id="plot-options-container" style="display: flex; align-items: flex-start;">
  <div id="plot-container" style="flex: 1;">
    <div id="observablehq-viewof-gl-772fbd0e"></div>
    <div id="observablehq-viewof-options-772fbd0e"></div>
  </div>
  <div id="options-container" style="flex: 1; margin-left: 10px;"> 
    <div id="observablehq-viewof-flowSelection-772fbd0e"></div>
    <div id="observablehq-viewof-alpha_deg-772fbd0e"></div>
    <div id="observablehq-viewof-U-772fbd0e"></div>
    <div id="observablehq-viewof-Gamma-772fbd0e"></div>
    <div id="observablehq-viewof-Kappa-772fbd0e"></div>
    <div id="observablehq-viewof-shift-772fbd0e"></div>
    <div id="observablehq-viewof-shift_vertical-772fbd0e"></div>
  </div>
</div>

<div id="observablehq-AirfoilButton-772fbd0e"></div>
<div id="observablehq-KuttaButton-772fbd0e"></div>

### Introduction

In this post we will create the potential flow and conformal map interactive visualization shown above. The goal is to gain visual intuition on how conformal maps work and how they are used in the theory of aerodynamics. The flows will be rendered using WebGL in an [observableHQ](https://observablehq.com/) notebook, following the approaches of [Ricky Reusser](https://observablehq.com/@rreusser/adaptive-domain-coloring) and [Graham Pullam](https://observablehq.com/@grahampullan/joukowski-airfoils). WebGL allows us to render high-performance interactive 2D and 3D graphics by efficiently exploiting our system's graphics capabilities (CPU or GPU). The price we pay is having to use JavaScript instead of standard engineering tools like Matlab or Python. 


### Potential Flow
We will focus on fluid flows whose velocity fields can be written as gradients of scalar potentials, $ \mathbf{u} = \nabla \phi$. Conservation of mass for incompressible fluids, $\nabla \cdot \mathbf{u}= 0$ implies that the scalar potential satisfies Laplace's equation $\nabla^2 \phi = 0$. Thus, we can create potential flows using solutions of Laplace's equation, called [harmonic functions](https://en.wikipedia.org/wiki/Harmonic_function), and which are mathematically very well understood. Harmonic functions are also linearly superimposable, meaning that their linear combinations are also valid solutions to Laplace's equations. We exploit this fact to create flows that are relevant to the theory of aerodynamics using three simple solutions to Laplace's equation: 1) **uniform flow**, 2) **point vortex flow**, 3) **doublet flow**. A uniform flow is characterized by its freestream velocity, $U_{\infty}$, and its flow angle, $\alpha$. A point vortex flow is characterized by its circulation, $\Gamma$, and a doublet flow is characterized by its doublet strength, $\kappa$, and (for simplicity) the same flow angle, $\alpha$. The complex velocity induced by each of these flows are, 

$$
\begin{equation}
W_{U} = U_{\infty} e^{-i\alpha} \;\;\;\;\;\;\;\;
W_{V} = \frac{i \Gamma}{2\pi \zeta} \;\;\;\;\;\;\;\;
W_{D} = -\frac{\kappa}{\zeta^2}e^{i\alpha}
\end{equation}
$$

where $\zeta \in \mathbb{C}$ is the position in complex space. The interactive plot above plots the streamlines as well as the pressure field induced by each of the above flows. The dropdown menu allows you to toggle between the different flows as well as their linear combinations. For example, choosing *Uniform + Vortex Flow* shows $W_{U} + W_{V}$. The coefficients can be adjusted using the sliders next to the plot. I encourage you to play around with settings we discussed so far and see how they change the flow pattern. 


### Flow Over a Cylinder
An interesting flow arises when we add a uniform flow and a doublet. You might have noticed that one of the streamlines for this flow forms a closed circle which varies in size as the freestream velocity and doublet strength change. By definition, the flow velocity is parallel to a streamline and never perpendicular to it. Thus, the circular streamline can be considered to be the boundary of a circular solid body, since (much like a solid body) no flow can enter it or leave it. We can analytically find the size of the circle, and its radius ends up being $a = \sqrt{\frac{\kappa}{U}}$. We can then visualize the body by replacing the flow inside of it with whitespace. Checking the option "Add body" under the plot does just that. Remember, this does not change the flow at all. It just helps us see the boundary between the flow inside the body and the flow outside of it, which do not communicate at all.  

An important characteristic of ths flow is that we can add a vortex of any strength, $\Gamma$, at the center of the circle without violating this boundary condition. We can see this by choosing *Uniform + Vortex + Doublet Flow* and moving the $\Gamma$ slider. While the streamlines change quite a bit, they never cross the boundary of the circle. Mathematically, this means that the solution to this problem is *non-unique*. 

### Conformal Maps
Perhaps the most powerful idea in the theory of potential flows is that of a conformal map. Conformal maps allow us to transform solutions of simple problems to solutions of difficult problems. For example, there exists conformal maps that can take the solution for the flow over the cylinder shown above, to the flow over a body of **any** shape. The caveat is that only simple shapes tend to have analytical conformal maps, while more complicated shapes have to be dealt with numerically using the [Schwarzâ€“Christoffel mapping](https://en.wikipedia.org/wiki/Schwarz%E2%80%93Christoffel_mapping). 

A conformal map of interest to the theory of aerodynamics is the *Joukowsky transform*. This transform takes the flow over a cylinder and maps it to the flow over some very reasonable looking airfoils! The transform is defined as,

$$
\begin{equation}
  z = \zeta + \frac{1}{\zeta}
\end{equation}
$$

The map takes every point in the complex $\zeta$-plane to a point in the a new complex z-plane. Checking the option "Apply Joukowsky Transform" should apply the transform to the visualization. I encourage you to play around with how each of the flows gets transformed by this map. 

### Airfoil Shapes
While the transform does some interesting stuff, the body never really looks like an airfoil. To do that we need to move the center of the circle away from the origin and apply the same transform. The sliders "Circle x-coordinate" and "Circle y-coordinate" do just that.  





<style>
    #wrapper {
      /* Add height to ensure there's enough scrollable content */
      height: 1000px; /* You can adjust this height as needed */
    }

    #plot-options-container {
      display: flex;
      align-items: flex-start;
      position: static;
      top: 0; /* Stick to the top of the viewport */
      background-color: white; /* Adjust the background color as needed */
      z-index: 1; /* Add z-index to ensure it appears above other content */
    }

    #plot-container {
      flex: 1;
    }

    #options-container {
      flex: 1;
      margin-left: 10px;
    }
    
  </style>



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@observablehq/inspector@5/dist/inspector.css">
<script type="module">
import {Runtime, Inspector} from "https://cdn.jsdelivr.net/npm/@observablehq/runtime@5/dist/runtime.js";
import define from "https://api.observablehq.com/d/6a13ba7040fa6e52.js?v=4";
new Runtime().module(define, name => {
  if (name === "viewof gl") return new Inspector(document.querySelector("#observablehq-viewof-gl-772fbd0e"));
  if (name === "viewof flowSelection") return new Inspector(document.querySelector("#observablehq-viewof-flowSelection-772fbd0e"));
  if (name === "viewof alpha_deg") return new Inspector(document.querySelector("#observablehq-viewof-alpha_deg-772fbd0e"));
  if (name === "viewof U") return new Inspector(document.querySelector("#observablehq-viewof-U-772fbd0e"));
  if (name === "viewof Gamma") return new Inspector(document.querySelector("#observablehq-viewof-Gamma-772fbd0e"));
  if (name === "viewof Kappa") return new Inspector(document.querySelector("#observablehq-viewof-Kappa-772fbd0e"));
  if (name === "viewof shift") return new Inspector(document.querySelector("#observablehq-viewof-shift-772fbd0e"));
  if (name === "viewof shift_vertical") return new Inspector(document.querySelector("#observablehq-viewof-shift_vertical-772fbd0e"));
  if (name === "viewof options") return new Inspector(document.querySelector("#observablehq-viewof-options-772fbd0e"));
  if (name === "KuttaButton") return new Inspector(document.querySelector("#observablehq-KuttaButton-772fbd0e"));
  if (name === "AirfoilButton") return new Inspector(document.querySelector("#observablehq-AirfoilButton-772fbd0e"));
  return ["programInfo","render","executeMultipleFunctions","values","radius","x_te","Kutta_circulation","initialGrid","beta","values_uniform","values_vortex","values_doublet","grid","values_uniform_doublet","values_uniform_vortex","values_uniform_vortex_doublet","values_vortex_doublet","AirfoilButtonList","alpha","transform","body"].includes(name);
});
</script>